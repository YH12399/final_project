var first_pet_image_ar = ['first_pet',
                            '<img src="images/pets/pluto/pluto_cookie.jpg" alt="Pluto the dog standing up to eat a cookie"',
                            '<img src="images/pets/pluto/pluto_sleeping.jpg" alt="Pluto sleeping on bed"',
                            '<img src="images/pets/pluto/pluto_sitting.jpg" alt="Pluto sitting and posed on top of a table"',
                            '<img src="images/pets/pluto/pluto_walk.jpg" alt="Pluto the dog on a walking trail" onclick="displayImage(this)"'];

var second_pet_image_ar = ['second_pet',
                            '<img src="images/pets/rocket/rocket_dinner.jpg" alt="Rocket is eating his dinner."',
                            '<img src="images/pets/rocket/rocket_wants_to_go_out.jpg" alt="Rocket wants to come out of the playpen"',
                            '<img src="images/pets/rocket/rocket_childhood.jpg" alt="Rocket is in his childhood."'];

var third_pet_image_ar = ['third_pet',
                            '<img src="images/pets/juno/juno_pup.JPG" alt="A young black and brown dog with his tongue hanging out"',
                            '<img src="images/pets/juno/juno_laying.JPG" alt="A black and brown dog laying on a rug"',
                            '<img src="images/pets/juno/juno_laying_2.JPG" alt="A black and brown dog laying on a wood floor"',
                            '<img src="images/pets/juno/juno_profile.JPG" alt="A profile perspective of a black and brown dog from shoulders up"'];

var fourth_pet_image_ar = ['fourth_pet',
                            '<img src="images/pets/lulu/lulu-eating-1.JPG" alt="Lulu enjoying a pepper"',
                            '<img src="images/pets/lulu/lulu-sleeping-1.jpg" alt="Lulu sleeping in a green house"',
                            '<img src="images/pets/lulu/lulu-sleeping-2.jpg" alt="Lulu sleeping in a gray house"',
                            '<img src="images/pets/lulu/lulu-2.jpg" alt="Lulu sniffing the camera"'];

var fifth_pet_image_ar = ['fifth_pet',
                            '<img src="images/pets/peddie/peddie_play.jpg" alt="Peddie is playing in the snow."',
                            '<img src="images/pets/peddie/peddie_swim.jpg" alt="Peddie is swimming in a lake."',
                            '<img src="images/pets/peddie/peddie_sleep.jpg" alt="Peddie loves sleeping on the couch."',
                            '<img src="images/pets/peddie/peddie_smile.jpg" alt="Peddie has the sweetest in the world."'];

var pets_image_nest_ar = [first_pet_image_ar, second_pet_image_ar, third_pet_image_ar, fourth_pet_image_ar, fifth_pet_image_ar];

var first_travel_image_ar = ['first_travel',
                                '<img src="images/travel/chiangmai/chiangmai.jpeg" alt="Overlook the temple and mountains at the higest peak in Thailand"',
                                '<img src="images/travel/chiangmai/chiangmai1.jpeg" alt="Colorful hot balloons in the heart of Chiang Mai"',
                                '<img src="images/travel/chiangmai/chiangmai2.jpeg" alt="Several elephants and smiley volunteers in the forest"',
                                '<img src="images/travel/chiangmai/chiangmai3.jpeg" alt="ancient temple of Chiang Mai"',
                                '<img src="images/travel/chiangmai/chiangmai4.jpeg" alt="several monks walk by the street"',
                                '<img src="images/travel/chiangmai/chiangmai5.jpeg" alt="several delicious dishes from Chiang Mai"'];

var second_travel_image_ar = ['second_travel',
'<img src="images/travel/monteverde/monteverde_cloud_forest.jpeg" alt="Clouds rolling through a line of trees."',
'<img src="images/travel/monteverde/monteverde_skyline.jpeg" alt="A view of the skyline of a small town during daytime"',
'<img src="images/travel/monteverde/monteverde_el_tigre_waterfalls.jpeg" alt="A person in red standing in front of one of El Tigre\'s four waterfalls."',
'<img src="images/travel/monteverde/monteverde_hanging_bridges.jpeg" alt="An image of a bridge hanging above the cloud forest canopy in Monteverde."',
'<img src="images/travel/monteverde/monteverde_hummingbirds.jpeg" alt="A hummingbird with green feathers drinking from a pink and orange flower."'];

var third_travel_image_ar = ['third_travel',
'<img src="images/travel/nyc/nyc_empire_state.jpeg" alt="A night view of the Empire Building with the downtown of Manhattan as the background"',
'<img src="images/travel/nyc/time_square.jpg" alt="People walking on the cross walk near the Time Square, with cars and building in the background"',
'<img src="images/travel/nyc/yellow_cab.jpg" alt="A yellow cab on a bridge"',
'<img src="images/travel/nyc/brooklyn_bridge.jpg" alt="A view of the Brooklyn Bridge on the bridge"',
'<img src="images/travel/nyc/bibble-sip.jpg" alt="Lots of cake in a bakery store with the logo of bibble &amp; sip in front."'];

var fourth_travel_image_ar = ['fourth_travel',
'<img src="images/travel/hangzhou/hangzhou_main.jpg" alt="A pagodas on a hill near a lake"',
'<img src="images/travel/hangzhou/lingyin.jpg" alt="An ancient Chinese style street with stairs going uphill, with many ancient Chinese style buildings on both sides"',
'<img src="images/travel/hangzhou/alibaba.jpeg" alt="A sign of the company Alibaba"',
'<img src="images/travel/hangzhou/westlake.jpg" alt="People on a ancient Chinese style bridge on the West Lake"'];

var fifth_travel_image_ar = ['fifth_travel',
'<img src="images/travel/boston/boston_main.jpg" alt="A view of the Boston skyline across the Charles River"',
'<img src="images/travel/boston/boston_common.jpg" alt="A daytime view of Boston common with many building in the background"',
'<img src="images/travel/boston/charles_river.jpg" alt="A night view of Boston\'s skyline on the Charles River"',
'<img src="images/travel/boston/harvard.jpg" alt="A view of a building Harvard University"'];

var sixth_travel_image_ar = ['sixth_travel',
'<img src="images/travel/seattle/seattle_main.jpg" alt="A night view of the skyline of Seattle"',
'<img src="images/travel/seattle/mount_rainer.jpg" alt="A view of Mount Rainier with some forest in front"',
'<img src="images/travel/seattle/pike_place.jpg" alt="A night view of the sign of the market, with street and people in front"',
'<img src="images/travel/seattle/space_needle.jpg" alt="A view of the spece needle from its bottom"'];

var travel_image_ar = [first_travel_image_ar, second_travel_image_ar, third_travel_image_ar, fourth_travel_image_ar, fifth_travel_image_ar, sixth_travel_image_ar];

var first_recipe_image_ar = ['first_recipe',
'<img src="images/recipes/chinese_hot_and_sour_soup/chinese_hot_and_sour_soup_1.jpg" alt="A spon in a bowl of Chinese Hot and Sour Soup"',
'<img src="images/recipes/chinese_hot_and_sour_soup/chinese_hot_and_sour_soup_2.jpg" alt="A small bowl of Chinese Hot and Sour Soup"',
'<img src="images/recipes/chinese_hot_and_sour_soup/chinese_hot_and_sour_soup_3.jpg" alt="A bowl of Chinese Hot and Sour Soup shot from its top"',
'<img src="images/recipes/chinese_hot_and_sour_soup/chinese_hot_and_sour_soup_4.jpg" alt="Ingredients for Chinese Hot and Sour Soup"'];

var second_recipe_image_ar = ['second_recipe',
'<img src="images/recipes/chicken_curry/japanese_chicken_curry.jpg" alt="A plate of Japanese Chicken Curry with white rice"',
'<img src="images/recipes/chicken_curry/curry_sauce.jpeg" alt="A box of chicken curry suace mix"',
'<img src="images/recipes/chicken_curry/raw_chicken_breast.jpeg" alt="A plate of raw chicken breast"',
'<img src="images/recipes/chicken_curry/rice.jpeg" alt="A bowl of white rice"'];

var third_recipe_image_ar = ['third_recipe',
'<img src="images/recipes/coca-cola_chicken_wings/coca_cola_chicken_wings.jpg" alt="A plate of Coca-Cola Chicken Wings"',
'<img src="images/recipes/coca-cola_chicken_wings/boils_in_coke.jpg" alt="5 chicken wings boil in coke in a fry pan"',
'<img src="images/recipes/coca-cola_chicken_wings/chicken-wings_and_rice_cake.jpg" alt="A bowl of rice covered by Coca-Cola Chicken Wings"',
'<img src="images/recipes/coca-cola_chicken_wings/chicken_wings_chopsticks.jpg" alt="A pair of chopsticks holding a Coca-Cola Chicken wing"'];

var recipe_image_ar = [first_recipe_image_ar, second_recipe_image_ar, third_recipe_image_ar];

function clickFunction(){
    console.log('clicked');
}

function clickFunction(index){
    overlayBackground(index);
    document.body.style.overflow = "hidden";
    disableMainPageInteraction();
}

function overlayBackground(index){
    var query = ".overlay";
    document.querySelector(query).style="display: block;position: fixed;top: 0;left: 0;right: 0;background-color: rgba(0, 0, 0, 0.5);backdrop-filter: blur(20px);overflow: hidden;width: 100%;height: 100%;transition: .5s ease-in-out;overscroll-behavior: none;";
    /*style for overlay used above
    display: block;
    position: fix;
    top: 0;
    left: 0;
    right: 0;
    background-color: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(20px);
    overflow: hidden;
    width: 100%;
    height: 100%;
    transition: .5s ease-in-out;
    overscroll-behavior: contain;
    */
   draw_gallery(index);
}

function closeFunction(){
    document.querySelector(".overlay").removeAttribute("style");
    document.querySelector(".overlay").innerHTML = "";
    document.body.style.overflow = "auto";
    enableMainPageInteraction()
}

function get_image_nest_list(index){
    if(index.search("pet") != -1){
        return pets_image_nest_ar;
    }else if(index.search("travel") != -1){
        return travel_image_ar;
    }else if(index.search("recipe") != -1){
        return recipe_image_ar;
    }
}

function create_preview_image_string(index){
    var source_ar = get_image_nest_list(index);
    var preview_image_string = '';
    var suffix = ' onclick="displayImage(this)" onkeydown="if(event.key === \'Enter\' || event.key === \' \') displayImage(this);" tabindex="0">';
    var image_ar = '';

    console.log(source_ar);

    for (var i = 0; i < source_ar.length; i++){
        if (source_ar[i][0] === index){
            image_ar = source_ar[i];
            break;
        }
    }

    for(var i = 1; i < image_ar.length; i++){
        preview_image_string += image_ar[i] + suffix;
    }

    console.log(preview_image_string);

    return preview_image_string;
}

function create_gallery_string(index){
    var gallery_string = '<div class="gallery_container"><button class="close_button" type="button" onclick="closeFunction()">Close</button><div class="in_display_image"></div><div class="preview_images">' + create_preview_image_string(index) + '</div></div>';
    return gallery_string;
}

async function draw_gallery(index){
    var query = ".overlay";
    var target = document.querySelector(query);
    console.log(target);
    await insert_html_to_gallery(index, target);
    displayImage(document.querySelector(".preview_images img"));
}

async function insert_html_to_gallery(index, target){
    var pet_gallery = create_gallery_string(index);
    target.innerHTML = pet_gallery;
}

function disableMainPageInteraction() {
    const focusableEls = document.querySelectorAll('div, a, button, textarea, input, select');
    focusableEls.forEach(el => {
        if (!el.closest('.overlay')) {
            el.setAttribute('tabindex', '-1');
            el.setAttribute('aria-hidden', 'true');
        }
    });
}

function enableMainPageInteraction() {
    const focusableEls = document.querySelectorAll('div, a, button, textarea, input, select');
    focusableEls.forEach(el => {
        el.removeAttribute('tabindex');
        el.removeAttribute('aria-hidden');
    });
}

function displayImage(image){
    console.log(image);
    document.querySelector(".in_display_image").innerHTML = image.outerHTML;
}

